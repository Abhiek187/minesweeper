(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,i=n(1),r=n.n(i),c=n(9),o=n.n(c),l=(n(14),n(2)),s=(n(15),n(8)),u=n(3),f=n(5),b=(n(16),n(17),n(0));!function(e){e[e.Hidden=0]="Hidden",e[e.Flagged=1]="Flagged",e[e.Open=2]="Open"}(a||(a={}));var d,h=function(e){var t=e.number,n=e.state,i=e.onClick,r=e.onRightClick;return Object(b.jsx)("button",{type:"button",className:"mine-button",onClick:i,onContextMenu:r,style:{backgroundColor:n===a.Open?"#959595":"#ededed"},children:Object(b.jsx)("div",{className:"mine-tile",style:{visibility:n===a.Hidden||0===t&&n!==a.Flagged?"hidden":"visible"},children:n===a.Flagged?Object(b.jsx)("i",{className:"fas fa-flag"}):t>=0?t:Object(b.jsx)("i",{className:"fas fa-bomb"})})})},g=function(e){var t=e.gameState,n=e.isAI,r=e.boardWidth,c=e.boardHeight,o=e.mines,g=e.onInitialClick,j=e.onWin,m=e.onLose,O=Object(i.useState)(Object(f.a)(Array(r*c)).map((function(e){return{number:0,state:a.Hidden,prob:-1}}))),v=Object(l.a)(O,2),p=v[0],y=v[1],C=function(e,t){return e.filter((function(e,n){return!t.includes(n)}))},x=Object(i.useCallback)((function(e){var t=[e%r,Math.floor(e/r)],n=t[0],a=t[1],i=[e-r-1,e-r,e-r+1,e-1,e+1,e+r-1,e+r,e+r+1];return 0===n?i=C(i,0===a?[0,1,2,3,5]:a===c-1?[0,3,5,6,7]:[0,3,5]):n===r-1?i=C(i,0===a?[0,1,2,4,7]:a===c-1?[2,4,5,6,7]:[2,4,7]):0===a?i=C(i,[0,1,2]):a===c-1&&(i=C(i,[5,6,7])),i}),[c,r]),I=Object(i.useCallback)((function(e){var t=Array.from(Array(p.length).keys());return(t=function(e){for(var t=0;t<e.length;t++){var n=Math.floor(Math.random()*e.length),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e}(t=C(t,e))).slice(0,o)}),[o,p.length]),M=Object(i.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,n=Object(f.a)(t);if(n[e].state=a.Open,0===t[e].number){var i,r=x(e),c=Object(u.a)(r);try{for(c.s();!(i=c.n()).done;){var l=i.value;n[l].state=a.Open}}catch(d){c.e(d)}finally{c.f()}}if(-1===t[e].number){for(var s=0;s<p.length;s++)p[s].state!==a.Open&&-1===p[s].number&&(n[s].state=a.Open);m()}else{var b=n.filter((function(e){return e.state!==a.Open})).length;b===o&&j()}y(n)}),[x,o,m,j,p]),k=Object(i.useCallback)((function(e){var t=Object(f.a)(p),n=x(e);n.push(e);var a,i=I(n),r=Object(u.a)(i);try{for(r.s();!(a=r.n()).done;){t[a.value].number=-1}}catch(h){r.e(h)}finally{r.f()}var c,o=Object(u.a)(i);try{for(o.s();!(c=o.n()).done;){var l,s=c.value,b=Object(u.a)(x(s));try{for(b.s();!(l=b.n()).done;){var d=l.value;-1!==t[d].number&&t[d].number++}}catch(h){b.e(h)}finally{b.f()}}}catch(h){o.e(h)}finally{o.f()}M(e,t)}),[x,I,p,M]),H=Object(i.useCallback)((function(e){if(t===d.Initial){if(o<Math.floor(.1*p.length)||o>Math.floor(.3*p.length))return void m();k(e),g()}else t===d.Playing&&p[e].state===a.Hidden&&M(e)}),[t,k,o,g,m,p,M]),S=Object(i.useCallback)((function(){if(t===d.Initial){var e=Math.floor(Math.random()*p.length);console.log("Initial: Clicking on R".concat(Math.floor(e/r),", C").concat(e%r)),H(e)}if(t===d.Playing){for(var n=p.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{prob:-1})})),i=0;i<p.length;i++)if(p[i].state===a.Open){var c=x(i),l=p[i].number,f=c.filter((function(e){return p[e].state===a.Flagged})).length,b=c.filter((function(e){return p[e].state===a.Hidden})).length;if(0===b)continue;var h=(l-f)/b;if(console.log("R".concat(Math.floor(i/r),", C").concat(i%r,":\n                adjacentTiles = ").concat(c,",\n                tileNum = ").concat(l,",\n                adjacentFlaggedTiles = ").concat(f,",\n                adjacentHiddenTiles = ").concat(b,"\n                mineOdds = ").concat(h)),1===h){var g,j=Object(u.a)(c);try{for(j.s();!(g=j.n()).done;){var m=g.value;if(p[m].state===a.Hidden){n[m].state=a.Flagged,console.log("P = 1: Flagging R".concat(Math.floor(m/r),", C").concat(m%r));var O=n.filter((function(e){return e.state===a.Flagged})).length;console.log("".concat(O,"/").concat(o," mines flagged (").concat(Math.round(O/o*100),"%)"))}}}catch(T){j.e(T)}finally{j.f()}return void y(n)}if(0===h){var v,C=Object(u.a)(c);try{for(C.s();!(v=C.n()).done;){var I=v.value;p[I].state===a.Hidden&&(M(I),console.log("P = 0: Clicking on R".concat(Math.floor(I/r),", C").concat(I%r)))}}catch(T){C.e(T)}finally{C.f()}return}var k,S=Object(u.a)(c);try{for(S.s();!(k=S.n()).done;){var F=k.value;p[F].state===a.Hidden&&h>n[F].prob&&(n[F].prob=h)}}catch(T){S.e(T)}finally{S.f()}}else if(p[i].state===a.Hidden&&-1===n[i].prob){var N=p.filter((function(e){return e.state===a.Flagged})).length,w=o-N,P=n.filter((function(e){return e.state!==a.Open})).length;n[i].prob=w/P}for(var W=1,R=[],A=0;A<p.length;A++)-1!==n[A].prob&&Math.abs(n[A].prob-W)<Number.EPSILON?R.push(A):-1!==n[A].prob&&n[A].prob<W&&(W=n[A].prob,R=[A]);console.log("minProb = ".concat(W,", safestTiles = ").concat(R));var L=R[Math.floor(Math.random()*R.length)];M(L),console.log("Guess: Clicking on R".concat(Math.floor(L/r),", C").concat(L%r))}}),[r,H,t,x,o,p,M]);return Object(i.useEffect)((function(){var e=p.filter((function(e){return e.state===a.Hidden})).length;t===d.Initial&&e!==r*c&&y(Object(f.a)(Array(r*c)).map((function(e){return{number:0,state:a.Hidden,prob:-1}}))),n&&S()}),[p,t,r,c,n,S]),Object(b.jsx)("main",{className:"mine-board",style:{width:"".concat(50*r,"px"),height:"".concat(50*c,"px"),gridTemplateColumns:"repeat(".concat(r,", 50px)"),gridTemplateRows:"repeat(auto-fill, 50px)"},children:p.map((function(e,n){return Object(b.jsx)(h,{number:e.number,state:e.state,onClick:function(){return H(n)},onRightClick:function(e){return function(e,n){if(e.preventDefault(),t===d.Playing&&p[n].state!==a.Open){var i=Object(f.a)(p);i[n].state=i[n].state===a.Hidden?a.Flagged:a.Hidden,y(i)}}(e,n)}},n)}))})},j=(n(19),function(e){var t=e.gameState,n=e.boardWidth,a=e.boardHeight,r=e.mines,c=e.onReset,o=e.onStartAI,s=e.onChangeWidth,u=e.onChangeHeight,f=e.onChangeMines,h=Object(i.useState)(0),g=Object(l.a)(h,2),j=g[0],m=g[1],O=Object(i.useRef)();Object(i.useEffect)((function(){switch(t){case d.Playing:O.current=setInterval((function(){m((function(e){return e+1}))}),1e3);break;case d.Win:case d.Lose:void 0!==O.current&&clearInterval(O.current);break;default:void 0!==O.current&&clearInterval(O.current),m(0)}return function(){void 0!==O.current&&clearInterval(O.current)}}),[t]);var v=function(e,t){var n=e.target,a=parseInt(n.value),i=parseInt(n.min),r=parseInt(n.max);isNaN(a)?n.setCustomValidity("Invalid number: It must be between ".concat(i," and ").concat(r," inclusive.")):a<i||a>r?n.setCustomValidity("Input is out of range: It must be between ".concat(i," and ").concat(r," inclusive.")):(t(a),c())};return Object(b.jsxs)("header",{className:"mine-header",children:[Object(b.jsx)("button",{type:"reset",className:"reset-button",onClick:c,children:"Reset"}),Object(b.jsx)("button",{type:"button",className:"ai-button",onClick:o,children:"AI"}),Object(b.jsx)("time",{className:"timer",style:{color:t===d.Win?"green":t===d.Lose?"red":"white"},children:function(){var e=Math.floor(j/60).toString().padStart(2,"0"),t=(j%60).toString().padStart(2,"0");return"".concat(e,":").concat(t)}()}),Object(b.jsxs)("div",{className:"size-field",children:[Object(b.jsx)("label",{htmlFor:"size-width",children:"Size: "}),Object(b.jsx)("input",{type:"number",id:"size-width",value:n,min:"4",max:"16",onChange:function(e){return v(e,s)}}),Object(b.jsx)("label",{htmlFor:"size-height",children:"x"}),Object(b.jsx)("input",{type:"number",id:"size-height",value:a,min:"4",max:"16",onChange:function(e){return v(e,u)}})]}),Object(b.jsxs)("div",{className:"mine-field",children:[Object(b.jsx)("label",{htmlFor:"mine-count",children:"Mines: "}),Object(b.jsx)("input",{type:"number",id:"mine-count",value:r,min:Math.floor(n*a*.1),max:Math.floor(n*a*.3),onChange:function(e){return v(e,f)}})]})]})});!function(e){e[e.Initial=0]="Initial",e[e.Playing=1]="Playing",e[e.Win=2]="Win",e[e.Lose=3]="Lose"}(d||(d={}));var m=function(){var e=Object(i.useState)(d.Initial),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(!1),c=Object(l.a)(r,2),o=c[0],s=c[1],u=Object(i.useState)(9),f=Object(l.a)(u,2),h=f[0],m=f[1],O=Object(i.useState)(9),v=Object(l.a)(O,2),p=v[0],y=v[1],C=Object(i.useState)(Math.floor(h*p*.2)),x=Object(l.a)(C,2),I=x[0],M=x[1];return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("h1",{className:"title",children:"Minesweeper"}),Object(b.jsx)(j,{gameState:n,boardWidth:h,boardHeight:p,mines:I,onReset:function(){a(d.Initial),s(!1)},onStartAI:function(){n===d.Initial&&s(!0)},onChangeWidth:function(e){return m(e)},onChangeHeight:function(e){return y(e)},onChangeMines:function(e){return M(e)}}),Object(b.jsx)(g,{gameState:n,isAI:o,boardWidth:h,boardHeight:p,mines:I,onInitialClick:function(){return a(d.Playing)},onWin:function(){a(d.Win),s(!1)},onLose:function(){a(d.Lose),s(!1)}})]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(m,{})}),document.getElementById("root")),O()}],[[20,1,2]]]);
//# sourceMappingURL=main.591366a9.chunk.js.map